DROP TABLE IF EXISTS PLAN;
CREATE TABLE PLAN
(
	"plan"    INTEGER  NOT NULL, /* 计划序号 */
	"month"   CHAR(12) NOT NULL, /* 月位图 */
	"date"    CHAR(31) NOT NULL, /* 日位图 */
	"day"     CHAR(7)  NOT NULL, /* 星期位图 */
	"period"  INTEGER  NOT NULL, /* 时段表号 */
	PRIMARY KEY ("plan")
);
INSERT INTO PLAN VALUES(1,'111111111111','1111111111111111111111111111111','1111111',1);

DROP TABLE IF EXISTS PERIOD;
CREATE TABLE PERIOD
(
	"periodtable"  INTEGER NOT NULL, /* 时段表号 */
	"periodindex"  INTEGER NOT NULL, /* 时段序号 */
	"hour"         INTEGER NOT NULL, /* 时(0-23) */
	"minute"       INTEGER NOT NULL, /* 分(0-59) */
	"scheme"       INTEGER NOT NULL, /* 方案序号 */
	"mode"         CHAR(1) NOT NULL, /* 控制模式(0-无/1-实时感应/2-统计感应/r-全红/y-黄闪/c-关灯/m-人行) */
	PRIMARY KEY ("periodtable","periodindex")
);
INSERT INTO PERIOD VALUES (1,1 ,0 ,0 ,2,'1');
INSERT INTO PERIOD VALUES (1,2 ,6 ,0 ,1,'1');
INSERT INTO PERIOD VALUES (1,3 ,8 ,0 ,2,'1');
INSERT INTO PERIOD VALUES (1,4 ,8 ,40,1,'1');
INSERT INTO PERIOD VALUES (1,5 ,11,30,2,'1');
INSERT INTO PERIOD VALUES (1,6 ,12,0 ,1,'1');
INSERT INTO PERIOD VALUES (1,7 ,14,0 ,2,'1');
INSERT INTO PERIOD VALUES (1,8 ,14,40,1,'1');
INSERT INTO PERIOD VALUES (1,9 ,17,0 ,2,'1');
INSERT INTO PERIOD VALUES (1,10,18,0 ,1,'1');
INSERT INTO PERIOD VALUES (1,11,23,0 ,0,'y');

DROP TABLE IF EXISTS SCHEME;
CREATE TABLE SCHEME
(
	"scheme" INTEGER NOT NULL, /* 方案序号 */
	"cycle"  INTEGER NOT NULL, /* 方案周期(只用于统计感应) */
	"stage"  INTEGER NOT NULL, /* 阶段表号 */
	PRIMARY KEY ("scheme")
);
INSERT INTO SCHEME VALUES (1,0,1);
INSERT INTO SCHEME VALUES (2,0,2);

DROP TABLE IF EXISTS STAGE;
CREATE TABLE STAGE
(
	"stagetable" INTEGER  NOT NULL, /* 阶段表号 */
	"stageindex" INTEGER  NOT NULL, /* 阶段序号 */
	"phase"      CHAR(32) NOT NULL, /* 相位位图 */
	"greenlight" INTEGER  NOT NULL, /* 常绿时间 */
	"greenflash" INTEGER  NOT NULL, /* 绿闪时间 */
	"yellow"     INTEGER  NOT NULL, /* 常黄时间 */
	"red"        INTEGER  NOT NULL, /* 常红时间 */
	"manlight"   INTEGER  NOT NULL, /* 行人常亮时间 */
	"manflash"   INTEGER  NOT NULL, /* 行人闪烁时间 */
	"delta"      INTEGER  NOT NULL, /* 单位延长时间 */
	"mingreen"   INTEGER  NOT NULL, /* 最小绿灯时间 */
	"maxgreen"   INTEGER  NOT NULL, /* 最大绿灯时间 */
	PRIMARY KEY ("stagetable","stageindex")
);
INSERT INTO STAGE VALUES (1,1,'01000001010000010000000000000000',15,3,3,1,-100,10,3,15,25);
INSERT INTO STAGE VALUES (1,2,'10000000100000000000000000000000',15,3,3,1,-100,10,3,15,25);
INSERT INTO STAGE VALUES (1,3,'00010100000101000000000000000000',15,3,3,1,-100,10,3,15,25);
INSERT INTO STAGE VALUES (1,4,'00001000000010000000000000000000',15,3,3,1,-100,10,3,15,25);

INSERT INTO STAGE VALUES (2,1,'11000000000000010000000000000000',15,3,3,1,-100,10,3,15,25);
INSERT INTO STAGE VALUES (2,2,'00000001110000000000000000000000',15,3,3,1,-100,10,3,15,25);
INSERT INTO STAGE VALUES (2,3,'00011100000000000000000000000000',15,3,3,1,-100,10,3,15,25);
INSERT INTO STAGE VALUES (2,4,'00000000000111000000000000000000',15,3,3,1,-100,10,3,15,25);

DROP TABLE IF EXISTS PHASE;
CREATE TABLE PHASE
(
	"phase"    INTEGER  NOT NULL, /* 相位序号 */
	"channel"  INTEGER  NOT NULL, /* 通道序号 */
	"corner"   INTEGER  NOT NULL, /* 路口序号 */
	"lane"     INTEGER  NOT NULL, /* 车道类型(1-左转/2-直行/3-右转/4-人行) */
	"conflict" CHAR(32) NOT NULL, /* 冲突相位 */
	PRIMARY KEY ("phase")
);
INSERT INTO PHASE VALUES (1 ,7 ,1,1,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (2 ,1 ,1,2,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (4 ,3 ,1,4,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (5 ,8 ,3,1,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (6 ,2 ,3,2,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (8 ,6 ,3,4,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (9 ,10,5,1,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (10,4 ,5,2,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (12,9 ,5,4,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (13,11,7,1,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (14,5 ,7,2,'00000000000000000000000000000000');
INSERT INTO PHASE VALUES (16,12,7,4,'00000000000000000000000000000000');

DROP TABLE IF EXISTS VEHICLE;
CREATE TABLE VEHICLE
(
	"device" INTEGER NOT NULL, /* 设备序号 */
	"lane"   INTEGER NOT NULL, /* 车道序号 */
	"phase"  INTEGER NOT NULL, /* 相位序号 */
	PRIMARY KEY ("device","lane")
);
INSERT INTO VEHICLE VALUES (36,1,2 );
INSERT INTO VEHICLE VALUES (36,2,2 );
INSERT INTO VEHICLE VALUES (36,3,1 );
INSERT INTO VEHICLE VALUES (37,1,10);
INSERT INTO VEHICLE VALUES (37,2,10);
INSERT INTO VEHICLE VALUES (37,3,9 );
INSERT INTO VEHICLE VALUES (38,1,14);
INSERT INTO VEHICLE VALUES (38,2,14);
INSERT INTO VEHICLE VALUES (38,3,13);
INSERT INTO VEHICLE VALUES (39,1,6 );
INSERT INTO VEHICLE VALUES (39,2,6 );
INSERT INTO VEHICLE VALUES (39,3,5 );

DROP TABLE IF EXISTS INTERFACE;
CREATE TABLE INTERFACE
(
	"port"  INTEGER NOT NULL, /* 端口序号 */
	"phase" INTEGER NOT NULL, /* 相位序号 */
	PRIMARY KEY ("port")
);
INSERT INTO INTERFACE VALUES (2 ,2 );
INSERT INTO INTERFACE VALUES (3 ,2 );
INSERT INTO INTERFACE VALUES (4 ,1 );
INSERT INTO INTERFACE VALUES (6 ,6 );
INSERT INTO INTERFACE VALUES (7 ,6 );
INSERT INTO INTERFACE VALUES (8 ,5 );
INSERT INTO INTERFACE VALUES (10,10);
INSERT INTO INTERFACE VALUES (11,10);
INSERT INTO INTERFACE VALUES (12,9 );
INSERT INTO INTERFACE VALUES (14,14);
INSERT INTO INTERFACE VALUES (15,14);
INSERT INTO INTERFACE VALUES (16,13);

DROP TABLE IF EXISTS CORNER;
CREATE TABLE CORNER
(
	"corner" INTEGER  NOT NULL, /* 路口序号 */
	"name"   CHAR(32) NOT NULL, /* 路口名称 */
	PRIMARY KEY ("corner")
);
INSERT INTO CORNER VALUES (1,'西直街北段');
INSERT INTO CORNER VALUES (3,'钟屏路东段');
INSERT INTO CORNER VALUES (5,'西直街南段');
INSERT INTO CORNER VALUES (7,'钟屏路西段');

DROP TABLE IF EXISTS TROUBLE_RECORD;
CREATE TABLE TROUBLE_RECORD
(
	"prdTime" DATETIME, /*故障产生时间*/
	"code"    INTEGER,  /*故障代码*/
	"Info"    INTEGER,  /*故障信息*/
	"clrTime" DATETIME  /*故障清除时间*/
);

DROP TABLE IF EXISTS EVENT_LOG;
CREATE TABLE EVENT_LOG
(
	"prdTime" DATETIME,  /*事件产生时间*/
	"code"    INTEGER    /*事件代码*/
);
